{% extends 'base.html'%}
{% block content %}
    <body class="text-center bg-light">
        <a href="/logout" style="float:right">Log Out</a>
        <!--  look for styling the form/input -->
        <h3>Choose 5 categories: </h3>
        <form action="/categories" method='POST'>
        {% for number in range(0, categories|length - 45) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(5, categories|length - 40) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(10, categories|length - 35) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(15, categories|length - 30) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(20, categories|length - 25) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(25, categories|length - 20) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(30, categories|length - 15) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(35, categories|length - 10) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
        {% for number in range(40, categories|length - 5) %}
           <input type='checkbox' class='single-checkbox' name='cat_id' value='{{ categories[number].cat_id }}'>
                {{ categories[number].cat_title }}
        {% endfor %}
        <br><br>
            <input id='submit-categories' type='submit' name='submitted' hidden='true'>
        </form>

            <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
            <script>
                let limit = 5;
                let counter = 0;
                $('input.single-checkbox').on('change', function(evt) {
                   if($(this).siblings(':checked').length >= limit) {
                        this.checked = false;
                   }
                });

                $('input.single-checkbox').on('change', function(evt){
                  if (this.checked === false) {
                    counter -= 1;
                    if (counter < 4) {
                      $('#submit-categories').attr('hidden', true);
                    }
                  }
                })

                $('input.single-checkbox').on('click', function(evt){
                    if (counter >= 4) {
                        $('#submit-categories').attr('hidden', false);
                    }
                    if (counter < 4) {
                      counter += 1;
                    }
                })
            </script>
    </body>

{% endblock %}
